parameters:
  script: サンプルスクリプト
  file_path: ./data/file_list.csv
  echo_target: ADDR1

commands:
  - type: xsv_reader
    comment: CSVデータが記述されているファイルパス(親)
    debug: no
    parameters:
      file_path_key: file_path
      delimiter: tab
      encoding: utf-8
      header: yes

  - type: xsv_reader
    comment: CSVデータ読み込み(子)
    debug: no
    parameters:
      file_path_key: file_path
      delimiter: comma
      encoding: utf-8
      header: yes

  - type: echo
    comment: エコーサンプル１
    debug: yes
    parameters:
      target_keys:
        - ${echo_target}
        - addr2
        - addr3

  - type: sql_execute
    comment: CSVデータをSqlite3に格納する
    debug: no
    parameters:
      db_name: default
      batch_count: 100
      init_sql: |
        delete from okinawa
      main_sql: |
        insert into okinawa(zip_code,zip_code_sub,zip_code_ex,addr1,addr2,addr3,addr4,addr5,addr6)
        values (
          /*zip_code*/'',
          /*zip_code_sub*/'',
          /*zip_code_ex*/'',
          /*addr1*/'',
          /*addr2*/'',
          /*addr3*/'',
          /*addr4*/'',
          /*addr5*/'',
          /*addr6*/'')
      term_sql: ""

  - type: sql_execute
    comment: CSVデータをPostgreSQLに格納する
    debug: yes
    parameters:
      db_name: postgresql
      batch_count: 100
      init_sql: |
        delete from okinawa
      main_sql: |
        insert into okinawa(zip_code,zip_code_sub,zip_code_ex,addr1,addr2,addr3,addr4,addr5,addr6)
        values (
          /*zip_code*/'',
          /*zip_code_sub*/'',
          /*zip_code_ex*/'',
          /*addr1*/'',
          /*addr2*/'',
          /*addr3*/'',
          /*addr4*/'',
          /*addr5*/'',
          /*addr6*/'')
      term_sql: ""
